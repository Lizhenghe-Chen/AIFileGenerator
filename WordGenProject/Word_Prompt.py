"""
Word文檔生成相關嘅提示詞模板
"""
from typing import Optional


def get_agent_system_prompt() -> str:
    """獲取AI代理嘅系統提示詞"""
    return """你係一個專業嘅教育內容生成助手，擅長根據提供嘅知識內容創建高質量嘅教學材料。"""

def get_word_generation_prompt(learning_content: str, user_requirements: Optional[str] = None) -> str:
    """獲取Word內容生成嘅提示詞"""
    return f"""
請根據用戶嘅需求分析並生成一份教學工作表嘅內容，要求學生掌握嘅內容知識點：{learning_content}
嚴格根據知識點嘅語言，使用**繁體中文**或**英語**，不要使用**簡體中文**，並且內容要準確、專業、適合教學使用的書面語，唔好口語化。
要求：
1. 內容要準確、專業、適合教學使用，唔好口語化，嚴格按照內容知識點內容生成
2. 選擇題要有合理嘅選項同正確答案，並必要時根據用戶需求提供多選或者單選
3. 簡答題嘅答案要點要清晰明確
4. 學習重點要突出關鍵概念
5. 教學建議要實用可行
6. 所有內容要與用戶需求主題相關
7. 確保JSON格式完整正確，唔好有語法錯誤；特別注意轉義字符，例如反斜杠喺LaTeX公式中必須使用雙反斜杠（\\\\）表示
8. 語言一致性（強制規則）  
9. 公式使用LaTeX格式，確保數學公式清晰可讀，括號使用雙斜杠（\\\\left( 同 \\\\right) 等）；用戶要求需要有公式考核，因此喺quiz_data或者問題中加入相關LaTeX公式示例（如數學表達或者適配內容嘅相關公式）
10. 驗證生成嘅JSON是否可解析，避免Invalid \\escape錯誤

請你注意用戶嘅額外需求：{user_requirements}

請直接返回JSON格式嘅內容，唔好添加其他說明文字。
請確保內容專業、準確，並符合教育領域嘅標準。

請按照以下JSON格式返回，唔好有中文標點符號喺json格式中。對應嘅內容為參考，請你根據用戶嘅需求生成相應嘅內容：
{{
    "theme": "文檔主題標題",
    "topic": "具體主題內容",
    "learning_focus": "學習重點內容",
    "learning_outcome": "學習成果描述",
    "teaching_suggestions": [ # 教學建議列表，可以包含多個建議，盡量具體，唔好過於籠統同簡潔
        "教學建議1",
        "教學建議2", 
        "教學建議3",
        ... # 可以根據需要添加更多建議
    ],
    "worksheet_title": "工作表標題",
    "quiz_data": [ # 呢啲內容必須係需要學習掌握嘅知識點內容，直接照搬，必要時提供公式同示例
        "學習內容片段1",
        "學習內容片段2",
        "學習內容片段3",
        ... # 可以根據需要添加更多內容
    ],
    "answer": "綜合答案或者總結性內容",
    "multiple_choice": [ #注意根據用戶需求生成單選或者多選題，題目數量可以調整，唔使帶編號或者字母
        {{
            "q": "選擇題題目1",
            "choices": ["選項A", "選項B", "選項C", "選項D", ...],
            "correct": [0, 1, 2, ...] 
        }},
        {{
            "q": "選擇題題目2",
            "choices": ["選項A", "選項B", "選項C", "選項D", ...],
            "correct": [1, 2, 3, ...]
        }},
        {{
            "q": "選擇題題目3",
            "choices": ["選項A", "選項B", "選項C", "選項D", ...],
            "correct": [0, 1, 3, ...]
        }}
    ],
    "short_answer_questions": [ # 簡答題可以調整數量同內容
        {{
            "q": "簡答題題目1",
            "a": [
                "答案要點1",
                "答案要點2", 
                "答案要點3",
                "答案要點4"
            ]
        }},
        {{
            "q": "簡答題題目2",
            "a": [
                "答案要點1",
                "答案要點2",
                "答案要點3"
            ]
        }}
    ],
    "filename": "建議嘅文件名（唔包含.docx擴展名）"
}}
"""
